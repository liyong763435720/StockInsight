# 数据源涨跌幅字段分析

## 测试结果

### 1. BaoStock
- **字段名**: `pctChg`
- **格式**: 字符串，值为百分比（如 '0.745500' 表示 0.7455%）
- **当前代码问题**: 完全忽略了 `pctChg` 字段，直接使用 `pct_change()` 计算

### 2. AkShare
- **字段名**: `涨跌幅`
- **格式**: 数值，值为百分比（如 0.89 表示 0.89%）
- **当前代码问题**: 没有检查是否有 `涨跌幅` 字段，直接调用 `calculate_pct_chg` 计算

### 3. Tushare
- **字段名**: `pct_chg`（推测）
- **格式**: 未知（需要token测试）
- **当前代码问题**: 检查了字段存在，但可能返回的值有问题（如001356的178.87%），所以需要验证和修复

## 建议修复方案

1. **BaoStock**: 优先使用返回的 `pctChg` 字段，转换为数值并处理格式
2. **AkShare**: 优先使用返回的 `涨跌幅` 字段，转换为标准格式
3. **Tushare**: 验证返回的 `pct_chg` 字段，如果合理则使用，否则重新计算

## 修复优先级

高优先级：BaoStock 和 AkShare（这两个数据源明确提供了涨跌幅字段，但代码没有使用）
中优先级：Tushare（需要验证返回值的准确性）

